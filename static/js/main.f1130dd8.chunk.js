(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{21:function(e,t,a){},30:function(e,t,a){e.exports=a(49)},35:function(e,t,a){},36:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=a(3),s=a(5),l=a(7),u=a(6),m=a(12),d=a(4),p=(a(35),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(s.a)(a,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(h,null):this.props.children}}]),a}(n.Component)),h=function(){return r.a.createElement("div",{className:"error__container"},r.a.createElement("span",{className:"error__icon"}),r.a.createElement("div",{className:"error__desc"},r.a.createElement("h1",null,"Error!"),"Something went wrong..."))},_=(n.Component,function(){return function(e){return function(t){Object(l.a)(n,t);var a=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var t=arguments.length,r=new Array(t),c=0;c<t;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state={didMount:!1},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({didMount:!0})}),500)}},{key:"render",value:function(){var t=this.state.didMount;return r.a.createElement("div",{className:"_animate ".concat(t&&"_active")},r.a.createElement(e,this.props))}}]),n}(n.Component)}}),f=(a(36),function(e){var t=e.name,a=e.index,n={transitionDelay:"".concat(.05*a,"s")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"cities__name slide-left",style:n},r.a.createElement(m.b,{to:"/city/".concat(t)},t)))}),E=_()((function(){var e=[{name:"Moscow",temp:5,weather:"Rain",logo:"logo"},{name:"Saint Petersburg",temp:5,weather:"Rain",logo:"logo"},{name:"Novosibirsk",temp:5,weather:"Rain",logo:"logo"},{name:"Yekaterinburg",temp:5,weather:"Rain",logo:"logo"},{name:"Nizhny Novgorod",temp:5,weather:"Rain",logo:"logo"},{name:"Kazan",temp:5,weather:"Rain",logo:"logo"},{name:"Chelyabinsk",temp:5,weather:"Rain",logo:"logo"},{name:"Omsk",temp:5,weather:"Rain",logo:"logo"},{name:"Samara",temp:5,weather:"Rain",logo:"logo"},{name:"Rostov-on-Don",temp:5,weather:"Rain",logo:"logo"},{name:"Miami",temp:5,weather:"Rain",logo:"logo"}].map((function(e,t){var a=e.name;return r.a.createElement(f,{key:a,name:a,to:"/city/".concat(a),index:t})}));return r.a.createElement("div",{className:"cities__container"},r.a.createElement("div",{className:"cities__grid"},e))})),v=(a(21),function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__full-container"},r.a.createElement(E,null)))}),y=(a(41),a(42),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"spinner__container"},r.a.createElement("div",{className:"spinner__inner-container"},r.a.createElement("div",{className:"spinner-border spinner",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))}}]),a}(n.Component)),w=function(e){return function(t){return function(a){Object(l.a)(c,a);var n=Object(u.a)(c);function c(){return Object(i.a)(this,c),n.apply(this,arguments)}return Object(s.a)(c,[{key:"componentDidMount",value:function(){var t=this.props.param,a=this.props,n=a.dataRequest,r=a.dataLoaded,c=a.dataError;n(),this.props.service[e](t).then((function(e){r(e)})).catch((function(){c()}))}},{key:"render",value:function(){var e=this.props,a=e.data,n=e.loading,c=e.error;return n?r.a.createElement(y,null):c?r.a.createElement(h,null):r.a.createElement(p,null,r.a.createElement(t,Object.assign({},this.props,{data:a})))}}]),c}(n.Component)}},g=r.a.createContext(),b=g.Provider,N=g.Consumer,C=r.a.createContext(),T=C.Provider,O=C.Consumer,R=function(){return function(e){return function(t){return r.a.createElement(O,null,(function(a){return r.a.createElement(e,Object.assign({},t,{service:a}))}))}}},S=function(){return function(e){return function(t){return r.a.createElement(N,null,(function(a){return r.a.createElement(e,Object.assign({},t,{service:a}))}))}}},j=a(15),k=a(13),F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"formatDate",value:function(e){var t=new Date(1e3*e);return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]+", "+("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+t.getFullYear()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data.temp,a=e.setTheme;a(t>15?"hot":t>5?"warm":"cold")}},{key:"render",value:function(){var e=this.props.data,t=e.date,a=e.temp,n=e.desc,c=e.icon,o=e.high,i=e.low,s=e.wind,l=e.humidity,u=this.props.param.city,d="/details";return u&&(d="/details/"+u),r.a.createElement("div",{className:"current-weather__container"},r.a.createElement("h2",{className:"current-weather-header__date fade-in"},this.formatDate(t)),r.a.createElement("h2",{className:"current-weather-header__city fade-in"},r.a.createElement(m.b,{to:"/cities"},r.a.createElement("i",{className:"fa fa-map-marker"}),u)),r.a.createElement("div",{className:"current-weather__type-container slide-left"},r.a.createElement("img",{className:"current-weather__type-img",src:"https://openweathermap.org/img/wn/".concat(c,"@2x.png"),alt:""}),r.a.createElement("h3",{className:"current-weather__type-desc"},n)),r.a.createElement("div",{className:"current-weather__temp current-weather-temp__container"},r.a.createElement("h1",{className:"current-weather-temp__temp-value rotate-in"},a),r.a.createElement("div",{className:"current-weather__hilo-container rotate-in"},r.a.createElement("div",{className:"current-weather__hilo-element"},r.a.createElement("i",{className:"current-weather__hilo-icon fa fa-chevron-up"}),r.a.createElement("span",{className:"current-weather__hilo-temp"},o)),r.a.createElement("div",{className:"current-weather__hilo-element"},r.a.createElement("i",{className:"current-weather__hilo-icon fa fa-chevron-down"}),r.a.createElement("span",{className:"current-weather__hilo-temp"},i))),r.a.createElement("div",{className:"current-weather__info current-weather-info__container slide-right"},r.a.createElement("div",{className:"current-weather-info__label"},"HUMIDITY"),r.a.createElement("div",{className:"current-weather-info__value"},"".concat(l,"%")),r.a.createElement("div",{className:"current-weather-info__label"},"WIND"),r.a.createElement("div",{className:"current-weather-info__value"},"".concat(s),"m/s"))),r.a.createElement(m.b,{to:d,className:"btn current-weather__more-button slide-bottom"},"More details"))}}]),a}(n.Component),D=Object(k.b)(Object(j.b)((function(){return function(e){return e.current}}),(function(e){return{dataRequest:function(){return e({type:"FETCH_CURRENT_WEATHER_REQUEST"})},dataLoaded:function(t){return e(function(e){return{type:"FETCH_CURRENT_WEATHER_SUCCESS",payload:e}}(t))},dataError:function(){return e({type:"FETCH_CURRENT_WEATHER_FAILURE",payload:t});var t},setTheme:function(t){return e(function(e){return{type:"SET_THEME",payload:e}}(t))}}})),S(),w("getCurrentWeather"),_())(F),H=(a(44),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).componentUpdate=function(){e.weatherService.getForecastWeather("Moscow").then(e.onWeatherLoaded).catch(e.onError)},e.onWeatherLoaded=function(t){e.setState({forecast:t,loading:!1})},e}return Object(s.a)(a,[{key:"formatDate",value:function(e){var t=new Date(1e3*e);return{weekday:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()],day:("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)}}},{key:"formatTemp",value:function(e){return e>0?"+".concat(e):"".concat(e)}},{key:"render",value:function(){var e=this,t=this.props.data;return r.a.createElement("div",{className:"forecast__container"},r.a.createElement(r.a.Fragment,null,t.map((function(t,a){var n=t.date,c=t.temp,o=t.icon,i=e.formatDate(n),s=i.weekday,l=i.day;return s=0===a?"Today":s,r.a.createElement(W,{key:n,weekday:s,day:l,temp:c,icon:o,index:a})}))))}}]),a}(n.Component)),W=function(e){var t=e.day,a=e.weekday,n=e.temp,c=e.icon,o=e.index,i={transitionDelay:"".concat(.1*o,"s")};return r.a.createElement("div",{className:"forecast-item__container rotate-in",style:i},r.a.createElement("div",{className:"forecast-item__date"},a),r.a.createElement("div",{className:"forecast-item__date"},t),r.a.createElement("img",{src:"https://openweathermap.org/img/wn/".concat(c,"@2x.png"),alt:""}),r.a.createElement("div",{className:"forecast-item__temp"},n))},x=Object(k.b)(Object(j.b)((function(){return function(e){return e.forecast}}),(function(e){return{dataRequest:function(){return e({type:"FETCH_FORECAST_REQUEST"})},dataLoaded:function(t){return e(function(e){return{type:"FETCH_FORECAST_SUCCESS",payload:e}}(t))},dataError:function(){return e({type:"FETCH_FORECAST_FAILURE",payload:t});var t}}})),S(),w("getForecastWeather"),_())(H),A=(a(45),a(29));var U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"formatDate",value:function(e){return new Date(1e3*e).getHours()+"h"}},{key:"render",value:function(){var e=this,t=this.props,a=t.theme,n=t.data,c=0,o=0;return n.forEach((function(e){c=e.temp<c?e.temp:c,o=e.temp>o?e.temp:o})),r.a.createElement("div",{className:"hourly__container"},r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:"hourly__scrollcontainer"},r.a.createElement("div",{className:"hourly__scroll"},n.map((function(t,n){var i,s,l=t.temp,u=t.date,m=t.rainChance,d=(l-(i=c))*(180-(s=100))/(o-i)+s,p=0===n?"Now":e.formatDate(u);return r.a.createElement(L,{key:u,temp:l,time:p,rainChance:m,height:d,theme:a,index:n})}))))))}}]),a}(n.Component),L=function(e){var t=e.temp,a=e.time,n=e.height,c=e.rainChance,o=e.index,i={height:"".concat(n,"px"),transitionDelay:"".concat(.05*o,"s")},s="";return 0!==Number(c)&&(s=r.a.createElement("div",{className:"hourly-element__rain"},r.a.createElement("img",{src:"https://openweathermap.org/img/wn/10d@2x.png",alt:""}),r.a.createElement("span",null,"".concat(c,"%")))),r.a.createElement("div",{className:"hourly__element-container"},r.a.createElement("div",{className:"hourly-element",style:i},r.a.createElement("div",{className:"hourly-element__temp"},t),s,r.a.createElement("div",{className:"hourly-element__time"},r.a.createElement("span",null,a))))},M=Object(k.b)(Object(j.b)((function(){return function(e){return e.hourly}}),(function(e){return{dataRequest:function(){return e({type:"FETCH_HOURLY_REQUEST"})},dataLoaded:function(t){return e(function(e){return{type:"FETCH_HOURLY_SUCCESS",payload:e}}(t))},dataError:function(){return e({type:"FETCH_HOURLY_FAILURE",payload:t});var t}}})),R(),w("getHourlyWeather"),_())(U),I=Object(d.e)((function(e){var t=e.match.params.id;return t||(t="Moscow"),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__top-container"},r.a.createElement("div",{className:"app-top__current-wrapper"},r.a.createElement(D,{param:{city:t}})),r.a.createElement("div",{className:"app-top__hourly-wrapper"},r.a.createElement(M,{param:{city:t}}))),r.a.createElement("div",{className:"app__bottom-container"},r.a.createElement(x,{param:{city:t}})))})),Y=(a(46),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"degreesToDirection",value:function(e){var t="N";return["NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"].forEach((function(a,n){e>=11.25+22.5*n&&(t=a)})),t}},{key:"formatDate",value:function(e){var t=new Date(1e3*e);return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]+", "+("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+t.getFullYear()}},{key:"formatTime",value:function(e){var t=new Date(1e3*e);return t.getHours()+":"+("0"+t.getMinutes()).slice(-2)}},{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"render",value:function(){var e=this.props.data,t=e.date,a=e.city,n=e.clouds,c=e.humidity,o=e.pressure,i=e.rain1h,s=e.sunrise,l=e.sunset,u=e.temp,d=e.feels_like,p=e.temp_max,h=e.temp_min,_=e.weatherDesc,f=e.weatherIcon,E=e.windDeg,v=e.windSpeed,y="/";return a&&(y="/city/"+a),r.a.createElement("div",{className:"details__container"},r.a.createElement(m.b,{className:"details__button-back",to:y},r.a.createElement("i",{className:"fa fa-arrow-left"})),r.a.createElement("div",{className:"details__column fade-in"},r.a.createElement("div",{className:"details__city"},r.a.createElement("div",{className:"details__city-label"},"Last updated"),r.a.createElement("div",{className:"details__city-value"},"".concat(this.formatTime(t)," ").concat(this.formatDate(t))),r.a.createElement("div",{className:"details__city-label"},"Location"),r.a.createElement("div",{className:"details__city-value"},r.a.createElement(m.b,{to:"/cities",className:"details__city-link"},r.a.createElement("i",{className:"fa fa-map-marker"}),a))),r.a.createElement("div",{className:"details__main-container"},r.a.createElement("div",{className:"details__temp-group"},r.a.createElement("div",{className:"details__temp rotate-in"},u),r.a.createElement("div",{className:"details__temp-details rotate-in"},r.a.createElement("div",{className:"details__label-temp "},"Feels like"),r.a.createElement("div",{className:"details__value temp"},d),r.a.createElement("div",{className:"details__label-temp"},"Min"),r.a.createElement("div",{className:"details__value temp"},h),r.a.createElement("div",{className:"details__label-temp"},"Max"),r.a.createElement("div",{className:"details__value temp"},p))),r.a.createElement("div",{className:"details__weather-group slide-right"},r.a.createElement("img",{className:"details__weather-img",src:"https://openweathermap.org/img/wn/".concat(f,"@2x.png"),alt:""}),r.a.createElement("div",{className:"details__weather-label"},"".concat(this.capitalizeFirstLetter(_))))),r.a.createElement("div",{className:"bottom__columns"},r.a.createElement("div",{className:"bottom__left"},r.a.createElement("div",{className:"bottom__col slide-left"},r.a.createElement("div",{className:"details__label"},"Cloudness"),r.a.createElement("div",{className:"details__value"},"".concat(n," %")),r.a.createElement("div",{className:"details__label"},"Humidity"),r.a.createElement("div",{className:"details__value"},"".concat(c," %")),r.a.createElement("div",{className:"details__label"},"Pressure"),r.a.createElement("div",{className:"details__value"},"".concat(o," hPa")),null!==i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"details__label"},"Amount of rain for the last hour"),r.a.createElement("div",{className:"details__value"},"".concat(i," mm"))):null,r.a.createElement("div",{className:"details__label"},"Wind Direction"),r.a.createElement("div",{className:"details__value"},"".concat(this.degreesToDirection(E))),r.a.createElement("div",{className:"details__label"},"Wind speed"),r.a.createElement("div",{className:"details__value"},"".concat(v," m/s")))),r.a.createElement("div",{className:"bottom__right"},r.a.createElement("div",{className:"bottom__col slide-right"},r.a.createElement("div",{className:"details__label"},"Sunrise time"),r.a.createElement("div",{className:"details__value"},this.formatTime(s)),r.a.createElement("div",{className:"details__label"},"Sunset time"),r.a.createElement("div",{className:"details__value"},this.formatTime(l)))))))}}]),a}(n.Component)),q=Object(k.b)(Object(j.b)((function(){return function(e){return e.details}}),(function(e){return{dataRequest:function(){return e({type:"FETCH_DETAILS_REQUEST"})},dataLoaded:function(t){return e(function(e){return{type:"FETCH_DETAILS_SUCCESS",payload:e}}(t))},dataError:function(){return e({type:"FETCH_DETAILS_FAILURE",payload:t});var t}}})),S(),w("getDetailWeather"),_())(Y),P=Object(d.e)((function(e){var t=e.match.params.id;return t||(t="Moscow"),r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__full-container app__full-container--grad"},r.a.createElement(q,{param:{city:t}})))})),Q=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).componentDidUpdate=function(){switch(e.props.store.getState().theme){case"hot":document.documentElement.className="hotTheme";break;case"warm":document.documentElement.className="warmTheme";break;case"cold":document.documentElement.className="coldTheme";break;default:document.documentElement.className="warmTheme"}},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p,null,r.a.createElement(m.a,{basename:"/weather-app"},r.a.createElement(d.a,{path:"/",exact:!0,component:I}),r.a.createElement(d.a,{path:"/city/:id",component:I}),r.a.createElement(d.a,{path:"/cities",component:v}),r.a.createElement(d.a,{path:"/details",exact:!0,component:P}),r.a.createElement(d.a,{path:"/details/:id",component:P})))}}]),a}(n.Component),K=function(e,t){switch(t.type){case"FETCH_CURRENT_WEATHER_REQUEST":return{data:{},loading:!0,error:!1};case"FETCH_CURRENT_WEATHER_SUCCESS":return{data:t.payload,loading:!1,error:null};case"FETCH_CURRENT_WEATHER_FAILURE":return{data:[],loading:!1,error:t.payload};default:return e.current}},B=function(e,t){switch(t.type){case"FETCH_FORECAST_REQUEST":return{data:{},loading:!0,error:!1};case"FETCH_FORECAST_SUCCESS":return{data:t.payload,loading:!1,error:null};case"FETCH_FORECAST_FAILURE":return{data:[],loading:!1,error:t.payload};default:return e.forecast}},z=function(e,t){switch(t.type){case"FETCH_HOURLY_REQUEST":return{data:{},loading:!0,error:!1};case"FETCH_HOURLY_SUCCESS":return{data:t.payload,loading:!1,error:null};case"FETCH_HOURLY_FAILURE":return{data:[],loading:!1,error:t.payload};default:return e.hourly}},G=function(e,t){switch(t.type){case"FETCH_DETAILS_REQUEST":return{data:{},loading:!0,error:!1};case"FETCH_DETAILS_SUCCESS":return{data:t.payload,loading:!1,error:null};case"FETCH_DETAILS_FAILURE":return{data:[],loading:!1,error:t.payload};default:return e.details}},J={current:{data:{},loading:!0,error:!1},hourly:{data:{},loading:!0,error:!1},forecast:{data:{},loading:!0,error:!1},details:{data:{},loading:!0,error:!1},theme:"warm"},V=function(e,t){switch(t.type){case"SET_THEME":return t.payload;default:return e.theme}},X=Object(k.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return{current:K(e,t),forecast:B(e,t),hourly:z(e,t),details:G(e,t),theme:V(e,t)}})),Z=a(8),$=a.n(Z),ee=a(16),te=a(27);function ae(e){return new Promise((function(t){return setTimeout(t,e)}))}var ne=a(27);function re(e){return new Promise((function(t){return setTimeout(t,e)}))}a(48);var ce=new function e(){var t=this;Object(i.a)(this,e),this._apiBase="https://api.weatherapi.com/v1/",this._apiKey="3ad9b2d2abb245dbb8e205619202010",this.getResource=function(){var e=Object(ee.a)($.a.mark((function e(a,n){var r,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=te.get(n)){e.next=12;break}return e.next=4,fetch("".concat(t._apiBase).concat(a));case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("Could not fetch ".concat(a,", received ").concat(c.status));case 7:return e.next=9,c.json();case 9:r=e.sent,t._incrementApiCallCount(),te.set(n,r,864e5);case 12:return e.next=14,ae(1e3);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getCurrentWeather=function(){var e=Object(ee.a)($.a.mark((function e(a){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("current.json?key=".concat(t._apiKey,"&q=").concat(a,"&days=5"),"current_weather_weatherapi");case 2:return n=e.sent,e.abrupt("return",t._transformCurrentWeather(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getForecastWeather=function(){var e=Object(ee.a)($.a.mark((function e(a){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("forecast.json?key=".concat(t._apiKey,"&q=").concat(a,"&days=5"),"forecast_weather_weatherapi");case 2:return n=e.sent,e.abrupt("return",t._transformForecastWeather(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getHourlyWeather=function(){var e=Object(ee.a)($.a.mark((function e(a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.city,e.next=3,t.getResource("forecast.json?key=".concat(t._apiKey,"&q=").concat(n,"&days=3"),"hourly_weather_weatherapi_"+n);case 3:return r=e.sent,e.abrupt("return",t._transformHourlytWeather(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformCurrentWeather=function(e){var t=e.location.name,a=e.current,n=a.condition,r=n.code,c=n.icon,o=n.text,i=a.last_updated_epoch,s=a.temp_c;return{name:t,date:i,temp:Math.round(s),weatherType:r,weatherTypeDesc:o,weatherTypeIcon:c,high:Math.round(0),low:Math.round(0)}},this._transformForecastWeather=function(e){return e},this._transformHourlytWeather=function(e){var t=e.forecast.forecastday,a=e.current.last_updated_epoch,n=[];return t.forEach((function(e){e.hour.forEach((function(e){var t=e.time_epoch,r=e.time,c=e.temp_c,o=e.chance_of_rain;n.length>=24||t>a&&n.push({date:t,time:r,temp:Math.round(c),rainChance:o})}))})),n},this._incrementApiCallCount=function(){var e=te.get("api-call-count");e=void 0!==e?e:0,e+=1,te.set("api-call-count",e,864e5),console.warn("WARNING: API CALL, YOU ONLY HAVE 1'000'000 of these. Count ".concat(e,"."))}},oe=new function e(){var t=this;Object(i.a)(this,e),this._apiBase="https://api.openweathermap.org/data/2.5/",this._apiKey="ee09c403a1b18f3bc221c981d5a7cf99",this._units="&units=metric",this.getResource=function(){var e=Object(ee.a)($.a.mark((function e(a,n){var r,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ne.get(n)){e.next=12;break}return e.next=4,fetch("".concat(t._apiBase).concat(a,"&appid=").concat(t._apiKey));case 4:if((c=e.sent).ok){e.next=7;break}throw new Error("Could not fetch ".concat(a,", received ").concat(c.status));case 7:return e.next=9,c.json();case 9:r=e.sent,t._incrementApiCallCount(),ne.set(n,r,864e5);case 12:return e.next=14,re(1e3);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getCurrentWeather=function(){var e=Object(ee.a)($.a.mark((function e(a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.city,e.next=3,t.getResource("weather?q=".concat(n).concat(t._units),"current_weather_openweathermap_"+n);case 3:return r=e.sent,e.abrupt("return",t._transformCurrentWeather(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getForecastWeather=function(){var e=Object(ee.a)($.a.mark((function e(a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.city,e.next=3,t.getResource("forecast?q=".concat(n).concat(t._units),"forecast_weather_openweathermap"+n);case 3:return r=e.sent,e.abrupt("return",t._transformForecastWeather(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getDetailWeather=function(){var e=Object(ee.a)($.a.mark((function e(a){var n,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.city,e.next=3,t.getResource("weather?q=".concat(n).concat(t._units),"detail_weather_openweathermap"+n);case 3:return r=e.sent,e.abrupt("return",t._transformDetailWeather(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformCurrentWeather=function(e){var t=e.dt,a=e.name,n=e.main,r=n.temp,c=n.temp_max,o=n.temp_min,i=n.humidity,s=e.weather,l=e.wind.speed,u=s[0],m=u.main,d=u.icon;return{name:a,date:t,temp:Math.round(r),desc:m,icon:d,high:Math.round(c),low:Math.round(o),wind:l,humidity:i}},this._transformForecastWeather=function(e){var t=e.list,a=[],n={};for(var r in t.forEach((function(e){var t=e.dt,a=e.main.temp,r=e.weather[0],c=r.id,o=r.main,i=r.icon,s=new Date(1e3*t),l=s.getDate(),u=s.getHours(),m={date:t,temp:Math.round(a),weatherType:c,weatherTypeDesc:o,icon:i};if(void 0!==n[l]){var d=new Date(1e3*n[l].date).getHours();Math.abs(u-12)<Math.abs(d-12)&&(n[l]=m)}else n[l]=m})),n)a.push(n[r]);return a},this._transformDetailWeather=function(e){var t=e.dt,a=e.name,n=e.sys,r=n.sunrise,c=n.sunset,o=e.clouds.all,i=e.main,s=i.temp,l=i.temp_min,u=i.temp_max,m=i.pressure,d=i.humidity,p=i.feels_like,h=e.wind,_=h.speed,f=h.deg,E=e.rain,v=e.weather[0],y=v.description,w=v.icon,g=null;return void 0!==E&&(g=E["1h"]),{date:t,city:a,sunrise:r,sunset:c,clouds:o,weatherDesc:y,weatherIcon:w,temp:Math.round(s),temp_min:Math.round(l),temp_max:Math.round(u),feels_like:Math.round(p),pressure:m,humidity:d,windSpeed:_,windDeg:f,rain1h:g}},this._incrementApiCallCount=function(){var e=ne.get("api-call-count");e=void 0!==e?e:0,e+=1,ne.set("api-call-count",e,864e5),console.warn("WARNING: API CALL, YOU ONLY HAVE 1'000 of these. Count ".concat(e,"."))}},ie=function(){o.a.render(r.a.createElement(b,{value:oe},r.a.createElement(T,{value:ce},r.a.createElement(j.a,{store:X},r.a.createElement(Q,{store:X})))),document.getElementById("root"))};ie(),X.subscribe(ie)}},[[30,1,2]]]);
//# sourceMappingURL=main.f1130dd8.chunk.js.map