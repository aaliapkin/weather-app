{"version":3,"sources":["Components/Error/ErrorBoundary.js","Components/Cities/Cities.js","Components/Error/ErrorButton.js","Components/Cities/index.js","Components/Pages/CitiesPage.js","Components/Redux/redux.js","Services/OWMService.js","Components/Header/index.js","Components/Header/Header.js","Components/Spinner/index.js","Components/Spinner/Spinner.js","Components/HOC/WithData.js","Components/Actions/actions.js","Components/HOC/Animated.js","Components/CurrentWeather/CurrentWeather.js","Components/CurrentWeather/index.js","Components/Forecast/Forecast.js","Components/Forecast/index.js","Services/WeatherApiService.js","Components/Hourly/Hourly.js","Components/Hourly/index.js","Components/Pages/WeatherPage.js","Components/Details/index.js","Components/Details/Details.js","Components/Pages/DetailsPage.js","Components/App/index.js","Components/App/App.js","index.js"],"names":["ErrorBoundary","state","hasError","this","setState","props","children","Component","ErrorIndicator","className","Cities","cities","name","temp","weather","logo","loading","error","elements","map","key","to","Element","Fragment","CitiesPage","store","createStore","city","theme","action","type","ls","require","sleep","ms","Promise","resolve","setTimeout","OWMService","_apiBase","_apiKey","_units","getResource","param","storage","a","data","get","fetch","res","ok","Error","status","json","_incrementApiCallCount","set","getCurrentWeather","_transformCurrentWeather","getForecastWeather","_transformForecastWeather","getDetailWeather","_transformDetailWeather","weatherData","dt","main","temp_max","temp_min","humidity","speed","wind","icon","date","Math","round","desc","high","low","list","forecast","days","p","forEach","item","id","Date","day","getDate","hours","getHours","newItem","weatherType","weatherTypeDesc","undefined","hours2","abs","push","sys","sunrise","sunset","all","clouds","pressure","feels_like","deg","rain","description","rain1h","weatherDesc","weatherIcon","windSpeed","windDeg","count","console","warn","Header","Spinner","role","withData","View","getData","update","then","catch","selectCity","setTheme","Animated","WrappedComponent","didMount","log","CurrentWeather","d","getDay","slice","getMonth","getFullYear","url","formatDate","src","alt","WeatherService","connect","actions","WithData","Forecast","componentUpdate","weatherService","onWeatherLoaded","onError","weekday","index","Hourly","min","max","el","in_min","out_min","rainChance","height","dateValue","time","style","Number","city_name","getHourlyWeather","_transformHourlytWeather","location","current","condition","code","text","last_updated_epoch","temp_c","weatherTypeIcon","forecastData","forecastday","arr","hour","time_epoch","chance_of_rain","length","dispatch","bindActionCreators","WeatherPage","withRouter","match","params","getState","Details","out","getMinutes","string","charAt","toUpperCase","formatTime","capitalizeFirstLetter","degreesToDirection","DetailsPage","App","componentDidUpdate","document","documentElement","basename","path","exact","component","ReactDOM","render","getElementById","subscribe"],"mappings":"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","file":"static/js/main.7bcdbe58.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './ErrorBoundary.scss';\r\n\r\nexport class ErrorBoundary extends Component {\r\n\r\n    state = {\r\n        hasError: false\r\n    }\r\n\r\n    componentDidCatch() {\r\n        this.setState({\r\n            hasError: true\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <ErrorIndicator />\r\n        }\r\n        return this.props.children;\r\n    }\r\n};\r\n\r\nconst ErrorIndicator = () => (\r\n\r\n    <div className=\"error__container\">\r\n        <span className=\"error__icon\" />\r\n        <div className=\"error__desc\"><h1>Error!</h1>Something went wrong...</div>\r\n    </div>\r\n)\r\n\r\nexport {ErrorIndicator};\r\nexport default ErrorBoundary;\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport './Cities.scss';\r\n\r\nexport default class Cities extends Component {\r\n\r\n    state = {\r\n        cities: [\r\n            { name: 'Moscow', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Saint Petersburg', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Novosibirsk', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Yekaterinburg', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Nizhny Novgorod', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Kazan', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Chelyabinsk', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Omsk', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Samara', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Rostov-on-Don', temp: 5, weather: 'Rain', logo: 'logo' },\r\n            { name: 'Miami', temp: 5, weather: 'Rain', logo: 'logo' }\r\n        ],\r\n        loading: false,\r\n        error: false\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            loading: true\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { cities } = this.state;\r\n\r\n        const elements = cities.map(({ name }) => (\r\n            <Element key={name} name={name} to={`/city/${name}`} />\r\n        ));\r\n\r\n        return (\r\n            <div className=\"cities__container\">\r\n                <div className=\"cities__grid\">\r\n                    {elements}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst Element = ({ name }) => (\r\n    <React.Fragment>\r\n        <h2 className=\"cities__name\">\r\n            <Link to={`/city/${name}`}>{name}</Link>\r\n        </h2>\r\n        <div className=\"cities__temp\">\r\n            15\r\n        </div>\r\n    </React.Fragment>\r\n);","import React, { Component } from 'react';\n\nexport class ErrorButton extends Component {\n\n  state = {\n    renderError: false\n  };\n\n  render() {\n    if (this.state.renderError) {\n      this.foo.bar = 0;\n    }\n\n    return (\n      <button\n        className=\"error-button btn btn-danger btn-sm\"\n        onClick={() => this.setState({renderError: true})}>\n        Throw Error\n      </button>\n    );\n  }\n}\n","import Cities from './Cities';\r\n\r\nexport default Cities;","import React from 'react';\r\nimport Cities from '../Cities';\r\n\r\n\r\nconst CitiesPage = () => {\r\n    return (\r\n        <div className=\"app\">\r\n            <div className={`app__full-container`}>\r\n                <Cities />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default CitiesPage;","import { createStore } from 'redux';\r\n\r\nconst initialState = {\r\n    city: 'Moscow',\r\n    theme: 'warm'\r\n};\r\n\r\nconst reducer = (state = {\r\n    city: 'Moscow',\r\n    theme: 'warm'\r\n},\r\n    action) => {\r\n    switch (action.type) {\r\n        case 'SELECT_CITY':\r\n            state = { ...state, city: action.city }\r\n            return state;\r\n\r\n        case 'SET_THEME':\r\n            state = { ...state, theme: action.theme }\r\n            return state;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport { store };","const ls = require('localstorage-ttl');\r\n\r\nconst dayMs = 24 * 60 * 60 * 1000;\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport default class OWMService {\r\n\r\n    _apiBase = 'https://api.openweathermap.org/data/2.5/';\r\n    _apiKey = 'ee09c403a1b18f3bc221c981d5a7cf99';\r\n    _units = '&units=metric';\r\n\r\n    getResource = async (param, storage) => {\r\n        let data = ls.get(storage);\r\n        if (!data || false) {\r\n            const res = await fetch(`${this._apiBase}${param}&appid=${this._apiKey}`);\r\n            if (!res.ok) {\r\n                throw new Error(`Could not fetch ${param}, received ${res.status}`);\r\n            }\r\n            data = await res.json();\r\n            this._incrementApiCallCount();\r\n            ls.set(storage, data, dayMs);\r\n        }\r\n        //console.log(storage + '_dump', data);\r\n        await sleep(500);\r\n        return data;\r\n    }\r\n\r\n    getCurrentWeather = async ({ city }) => {\r\n        const data = await this.getResource(`weather?q=${city}${this._units}`, 'current_weather_openweathermap_' + city)\r\n        return this._transformCurrentWeather(data);\r\n    };\r\n\r\n    getForecastWeather = async ({ city }) => {\r\n        const data = await this.getResource(`forecast?q=${city}${this._units}`, 'forecast_weather_openweathermap' + city)\r\n        return this._transformForecastWeather(data);\r\n    };\r\n\r\n    getDetailWeather = async ({ city }) => {\r\n        const data = await this.getResource(`weather?q=${city}${this._units}`, 'detail_weather_openweathermap' + city)\r\n        return this._transformDetailWeather(data);\r\n    };\r\n\r\n    _transformCurrentWeather = (weatherData) => {\r\n        const {\r\n            dt,\r\n            name,\r\n            main: {\r\n                temp,\r\n                temp_max,\r\n                temp_min,\r\n                humidity\r\n            },\r\n            weather,\r\n            wind: {\r\n                speed\r\n            }\r\n        } = weatherData;\r\n\r\n        const { main, icon } = weather[0];\r\n        return {\r\n            name: name,\r\n            date: dt,\r\n            temp: Math.round(temp),\r\n            desc: main,\r\n            icon: icon,\r\n            high: Math.round(temp_max),\r\n            low: Math.round(temp_min),\r\n            wind: speed,\r\n            humidity: humidity\r\n        };\r\n    };\r\n\r\n    _transformForecastWeather = ({ list }) => {\r\n        const forecast = [];\r\n        const days = {};\r\n        list.forEach((item) => {\r\n            const { dt, main: { temp }, weather } = item;\r\n            const { id, main, icon } = weather[0];\r\n            const date = new Date(dt * 1000);\r\n            const day = date.getDate();\r\n            const hours = date.getHours();\r\n\r\n            const newItem = {\r\n                date: dt,\r\n                temp: Math.round(temp),\r\n                weatherType: id,\r\n                weatherTypeDesc: main,\r\n                icon: icon\r\n            };\r\n\r\n            if (days[day] !== undefined) {\r\n                const date2 = new Date(days[day].date * 1000);\r\n                const hours2 = date2.getHours();\r\n                if (Math.abs(hours - 12) < Math.abs(hours2 - 12)) {\r\n                    days[day] = newItem;\r\n                }\r\n            } else {\r\n                days[day] = newItem;\r\n            }\r\n        });\r\n        for (const p in days) {\r\n            forecast.push(days[p]);\r\n        }\r\n        return forecast;\r\n    };\r\n\r\n    _transformDetailWeather = (weatherData) => {\r\n\r\n        const {\r\n            dt,\r\n            name,\r\n            sys: {\r\n                sunrise,\r\n                sunset\r\n            },\r\n            clouds: {\r\n                all\r\n            },\r\n            main: {\r\n                temp,\r\n                temp_min,\r\n                temp_max,\r\n                pressure,\r\n                humidity,\r\n                feels_like\r\n            },\r\n            wind: {\r\n                speed,\r\n                deg\r\n            },\r\n            rain,\r\n            weather\r\n        } = weatherData;\r\n\r\n        const {\r\n            description,\r\n            icon\r\n        } = weather[0];\r\n\r\n        let rain1h = null;\r\n\r\n        if (rain !== undefined) {\r\n            rain1h = rain['1h'];\r\n        }\r\n\r\n        return {\r\n            date: dt,\r\n            city: name,\r\n            sunrise: sunrise,\r\n            sunset: sunset,\r\n            clouds: all,\r\n            weatherDesc: description,\r\n            weatherIcon: icon,\r\n            temp: Math.round(temp),\r\n            temp_min: Math.round(temp_min),\r\n            temp_max: Math.round(temp_max),\r\n            feels_like: Math.round(feels_like),\r\n            pressure: pressure,\r\n            humidity: humidity,\r\n            windSpeed: speed,\r\n            windDeg: deg,\r\n            rain1h: rain1h\r\n        };\r\n    }\r\n\r\n    _incrementApiCallCount = () => {\r\n        let count = ls.get('api-call-count');\r\n        count = count !== undefined ? count : 0;\r\n        count = count + 1;\r\n        ls.set('api-call-count', count, dayMs);\r\n        console.warn(`WARNING: API CALL, YOU ONLY HAVE 1'000 of these. Count ${count}.`);\r\n    }\r\n\r\n};\r\n\r\n\r\n// const exclude = '&exclude=alerts,minutely,hourly,daily'\r\n// const exclude = '';","import Header from './Header';\r\nexport default Header;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport './Header.scss';\r\n\r\nconst Header = ({ city, date }) => (\r\n    <div>\r\n        <div className=\"header__container\">\r\n            <h2 className=\"header__date\">{date}</h2>\r\n            <h2 className=\"header__city\">\r\n                <Link to='/cities'><i className=\"fa fa-map-marker\" />{city}</Link>\r\n            </h2>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nexport default Header;\r\n","import Spinner from './Spinner';\r\n\r\nexport default Spinner;","import React, { Component } from 'react';\r\nimport './Spinner.scss'\r\n\r\nexport default class Spinner extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"spinner__container\">\r\n                <div className=\"spinner-border spinner\" role=\"status\">\r\n                    <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n};","import React, { Component } from 'react';\r\nimport Spinner from '../Spinner';\r\nimport {ErrorBoundary, ErrorIndicator } from '../Error';\r\n\r\nconst withData = (View, getData) => {\r\n    return class extends Component {\r\n\r\n        state = {\r\n            data: null,\r\n            loading: true,\r\n            error: false\r\n        };\r\n\r\n        componentDidMount() {\r\n            this.update();\r\n        }\r\n\r\n        update() {\r\n            this.setState({\r\n                loading: true,\r\n                error: false\r\n            });\r\n\r\n            const param = this.props.param;\r\n\r\n            getData(param)\r\n                .then((data) => {\r\n                    this.setState({\r\n                        data,\r\n                        loading: false\r\n                    });\r\n                })\r\n                .catch(() => {\r\n                    this.setState({\r\n                        error: true,\r\n                        loading: false\r\n                    });\r\n                });\r\n        }\r\n\r\n\r\n        render() {\r\n            const { data, loading, error } = this.state;\r\n\r\n            if (loading) {\r\n                return <Spinner />;\r\n            }\r\n\r\n            if (error) {\r\n                return <ErrorIndicator />;\r\n            }\r\n\r\n            return (\r\n                <ErrorBoundary>\r\n                    <View {...this.props} data={data} />\r\n                </ErrorBoundary>\r\n            );\r\n        }\r\n    };\r\n};\r\n\r\nexport default withData;\r\n","\r\nexport const selectCity = (id) => {\r\n    return { type: 'SELECT_CITY', city: id };\r\n}\r\n\r\nexport const setTheme = (theme) => {\r\n    return { type: 'SET_THEME', theme: theme };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nconst Animated = (WrappedComponent) => {\r\n    return class extends Component {\r\n        state = { didMount: false }\r\n\r\n        componentDidMount() {\r\n            setTimeout(() => {\r\n                this.setState({ didMount: true })\r\n            }, 500)\r\n        }\r\n\r\n        render() {\r\n            const { didMount } = this.state\r\n            console.log(this.state);\r\n            return (\r\n                <div className={`fade-in ${didMount && 'visible'}`}>\r\n                    <WrappedComponent {...this.props} />\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default Animated;\r\n","import React, { Component } from 'react';\r\nimport WeatherService from '../../Services/OWMService';\r\nimport Header from '../Header';\r\nimport './CurrentWeather.scss';\r\nimport { Link } from 'react-router-dom';\r\nimport { WithData } from '../HOC';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../Actions'\r\nimport { bindActionCreators } from 'redux';\r\nimport Animated from '../HOC/Animated';\r\n\r\n\r\nclass CurrentWeather extends Component {\r\n\r\n    formatDate(date) {\r\n        const d = new Date(date * 1000);\r\n        const weekday = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n        return (weekday[d.getDay()] + \", \" + (\"0\" + d.getDate()).slice(-2)\r\n            + \".\" + (\"0\" + (d.getMonth() + 1)).slice(-2) + \".\" + d.getFullYear());\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { data: { temp }, setTheme } = this.props;\r\n        if (temp > 15) {\r\n            setTheme('hot');\r\n        } else if (temp > 5) {\r\n            setTheme('warm');\r\n        } else {\r\n            setTheme('cold');\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const {\r\n            date, name, temp, desc, icon, high,\r\n            low, wind, humidity\r\n        } = this.props.data;\r\n\r\n        const { city } = this.props.param;\r\n\r\n        let url = '/details';\r\n        if (city) {\r\n            url = '/details/' + city\r\n        }\r\n\r\n        return (\r\n            <div className=\"current-weather__container\">\r\n                <Header city={name} date={this.formatDate(date)} />\r\n                <div className=\"current-weather__container-inner\">\r\n                    <div className=\"current-weather__type-container\">\r\n                        <img\r\n                            className=\"current-weather__type-img\"\r\n                            src={`https://openweathermap.org/img/wn/${icon}@2x.png`} alt=\"\" />\r\n                        <h3 className=\"current-weather__type-desc\">{desc}</h3>\r\n                    </div>\r\n                    <div className=\"current-weather__temp-container\">\r\n                        <h1 className=\"current-weather__temp\">\r\n                            {temp}\r\n                        </h1>\r\n                        <div className=\"current-weather__hilo-container\">\r\n                            <div className=\"current-weather__hilo-element\">\r\n                                <i className=\"current-weather__hilo-icon fa fa-chevron-up\" />\r\n                                <span className=\"current-weather__hilo-temp\">{high}</span>\r\n                            </div>\r\n                            <div className=\"current-weather__hilo-element\">\r\n                                <i className=\"current-weather__hilo-icon fa fa-chevron-down\" />\r\n                                <span className=\"current-weather__hilo-temp\">{low}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"current-weather__info-container\">\r\n                            <div className=\"current-weather__info\">\r\n                                <div className=\"current-weather__info-label\">\r\n                                    HUMIDITY\r\n                                </div>\r\n                                <div className=\"current-weather__info-value\">\r\n                                    {`${humidity}%`}\r\n                                </div>\r\n                                <div className=\"current-weather__info-label\">\r\n                                    WIND\r\n                                </div>\r\n                                <div className=\"current-weather__info-value\">\r\n                                    {`${wind}`}m/s\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <Link to={url} className=\"khbtn current-weather__more-button\">More details</Link>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nconst { getCurrentWeather } = new WeatherService();\r\n\r\nexport default Animated(connect(null, actions)(WithData(CurrentWeather, getCurrentWeather)));","import CurrentWeather from './CurrentWeather';\r\n\r\nexport default CurrentWeather;\r\n","import React, { Component } from 'react';\r\nimport WeatherService from '../../Services/OWMService';\r\nimport './Forecast.scss'\r\nimport { WithData } from '../HOC'\r\n\r\nclass Forecast extends Component {\r\n\r\n    componentUpdate = () => {\r\n        this.weatherService\r\n            .getForecastWeather(\"Moscow\")\r\n            .then(this.onWeatherLoaded)\r\n            .catch(this.onError);\r\n    }\r\n\r\n    onWeatherLoaded = (forecast) => {\r\n        this.setState({\r\n            forecast,\r\n            loading: false\r\n        });\r\n    }\r\n\r\n    formatDate(date) {\r\n        const d = new Date(date * 1000);\r\n        const weekday = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n        return {\r\n            weekday: weekday[d.getDay()],\r\n            day: (\"0\" + d.getDate()).slice(-2) + \".\" + (\"0\" + (d.getMonth() + 1)).slice(-2)\r\n        };\r\n    }\r\n\r\n    formatTemp(temp) {\r\n        if (temp > 0) {\r\n            return `+${temp}`;\r\n        } else {\r\n            return `${temp}`;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const data = this.props.data;\r\n\r\n        return (\r\n            <div className=\"forecast__container\">\r\n                <React.Fragment>\r\n                    {data.map(({ date, temp, icon }, index) => {\r\n                        let { weekday, day } = this.formatDate(date);\r\n                        weekday = (index === 0) ? 'Today' : weekday;\r\n                        return <Element key={date} weekday={weekday} day={day} temp={temp} icon={icon} />;\r\n                    })}\r\n                </React.Fragment>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nconst Element = ({ day, weekday, temp, icon }) => {\r\n\r\n    return <div className=\"forecast-item__container\">\r\n        <div className=\"forecast-item__date\">\r\n            {weekday}\r\n        </div>\r\n        <div className=\"forecast-item__date\">\r\n            {day}\r\n        </div>\r\n        <img src={`https://openweathermap.org/img/wn/${icon}@2x.png`} alt=\"\" />\r\n        <div className=\"forecast-item__temp\">\r\n            {temp}\r\n        </div>\r\n    </div>;\r\n}\r\n\r\nconst { getForecastWeather } = new WeatherService();\r\n\r\nexport default WithData(Forecast, getForecastWeather);","import Forecast from './Forecast';\r\nexport default Forecast;","const ls = require('localstorage-ttl');\r\n\r\nconst dayMs = 24 * 60 * 60 * 1000;\r\n\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport default class WeatherApiService {\r\n\r\n    _apiBase = 'https://api.weatherapi.com/v1/';\r\n    _apiKey = '3ad9b2d2abb245dbb8e205619202010';\r\n\r\n    getResource = async (param, storage) => {\r\n        let data = ls.get(storage);\r\n        if (!data || false) {\r\n            //'http://api.weatherapi.com/v1/forecast.json?key=3ad9b2d2abb245dbb8e205619202010&q=Moscow&days=3'\r\n            const res = await fetch(`${this._apiBase}${param}`);\r\n            if (!res.ok) {\r\n                throw new Error(`Could not fetch ${param}, received ${res.status}`);\r\n            }\r\n            data = await res.json();\r\n            this._incrementApiCallCount();\r\n            ls.set(storage, data, dayMs);\r\n        }\r\n        // console.log(storage + '_dump', data);\r\n        await sleep(500);\r\n        return data;\r\n    }\r\n\r\n    getCurrentWeather = async (city_name) => {\r\n        const data = await this.getResource(`current.json?key=${this._apiKey}&q=${city_name}&days=5`, 'current_weather_weatherapi')\r\n        return this._transformCurrentWeather(data);\r\n    };\r\n\r\n    getForecastWeather = async (city_name) => {\r\n        const data = await this.getResource(`forecast.json?key=${this._apiKey}&q=${city_name}&days=5`, 'forecast_weather_weatherapi')\r\n        return this._transformForecastWeather(data);\r\n    };\r\n\r\n    getHourlyWeather = async ({city}) => {\r\n        const data = await this.getResource(`forecast.json?key=${this._apiKey}&q=${city}&days=3`, 'hourly_weather_weatherapi_'+city)\r\n        return this._transformHourlytWeather(data);\r\n    }\r\n\r\n    _transformCurrentWeather = (weatherData) => {\r\n        const {\r\n            location: {\r\n                name,\r\n            },\r\n            current: {\r\n                condition: {\r\n                    code,\r\n                    icon,\r\n                    text\r\n                },\r\n                last_updated_epoch,\r\n                temp_c,\r\n            }\r\n        } = weatherData;\r\n        return {\r\n            name: name,\r\n            date: last_updated_epoch,\r\n            temp: Math.round(temp_c),\r\n            weatherType: code,\r\n            weatherTypeDesc: text,\r\n            weatherTypeIcon: icon,\r\n            high: Math.round(0),\r\n            low: Math.round(0)\r\n        };\r\n    };\r\n\r\n    _transformForecastWeather = (forecastData) => {\r\n        return forecastData;\r\n    };\r\n\r\n    _transformHourlytWeather = ({ forecast: { forecastday }, current: { last_updated_epoch } }) => {\r\n        const arr = [];\r\n        forecastday.forEach(({ hour }) => {\r\n            hour.forEach(({ time_epoch,time, temp_c, chance_of_rain }) => {\r\n                if (arr.length >= 24) {\r\n                    return;\r\n                }\r\n                if (time_epoch > last_updated_epoch) {\r\n                    arr.push(\r\n                        {\r\n                            date: time_epoch,\r\n                            time: time,\r\n                            temp: Math.round(temp_c),\r\n                            rainChance: chance_of_rain\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n        });\r\n        return arr;\r\n    }\r\n\r\n    _incrementApiCallCount = () => {\r\n        let count = ls.get('api-call-count');\r\n        count = count !== undefined ? count : 0;\r\n        count = count + 1;\r\n        ls.set('api-call-count', count, dayMs);\r\n        console.warn(`WARNING: API CALL, YOU ONLY HAVE 1'000'000 of these. Count ${count}.`);\r\n    }\r\n\r\n};\r\n\r\n\r\n// const exclude = '&exclude=alerts,minutely,hourly,daily'\r\n// const exclude = '';","import React, { Component } from 'react';\r\nimport './Hourly.scss';\r\nimport WeatherService from '../../Services/WeatherApiService'\r\nimport ScrollContainer from 'react-indiana-drag-scroll'\r\nimport { WithData } from '../HOC';\r\nimport Animated from '../HOC/Animated';\r\n\r\nfunction map(x, in_min, in_max, out_min, out_max) {\r\n    return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\r\n}\r\n\r\nclass Hourly extends Component {\r\n    formatDate(date) {\r\n        const d = new Date(date * 1000);\r\n        return d.getHours() + 'h';\r\n    }\r\n\r\n    render() {\r\n        const { theme, data } = this.props;\r\n\r\n        let min = 0, max = 0;\r\n        data.forEach((el) => {\r\n            min = el.temp < min ? el.temp : min;\r\n            max = el.temp > max ? el.temp : max;\r\n        });\r\n\r\n        return (\r\n            <div className=\"hourly__container\">\r\n                <React.Fragment>\r\n                    <ScrollContainer className=\"hourly__scrollcontainer\">\r\n                        <div className=\"hourly__scroll\">\r\n                            {data.map(({ temp, date, rainChance }, index) => {\r\n                                let height = map(temp, min, max, 100, 180);\r\n                                const dateValue = (index === 0) ? 'Now' : this.formatDate(date);\r\n                                return (\r\n                                    <Element\r\n                                        key={date}\r\n                                        temp={temp}\r\n                                        time={dateValue}\r\n                                        rainChance={rainChance}\r\n                                        height={height}\r\n                                        theme={theme} />\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </ScrollContainer>\r\n                </React.Fragment>\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nconst Element = ({ temp, time, height, rainChance, theme }) => {\r\n    const style = {\r\n        height: `${height}px`\r\n    };\r\n    let rain = '';\r\n    if (Number(rainChance) !== 0) {\r\n        rain = (\r\n            <div className=\"hourly__rain\">\r\n                <img src={`https://openweathermap.org/img/wn/10d@2x.png`} alt=\"\" />\r\n                <span className=\"hourly__rain-percent\">{`${rainChance}%`}</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"hourly__element-container\">\r\n            <div className={`hourly__element ${theme}`} style={style}>\r\n                <div className=\"hourly__element-tempgroup\">\r\n                    <div className=\"hourly__temp\">{temp}</div>\r\n                    {rain}\r\n                </div>\r\n                <div className=\"hourly__time\">{time}</div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst { getHourlyWeather } = new WeatherService();\r\n\r\nexport default Animated(WithData(Hourly, getHourlyWeather));","import Hourly from './Hourly';\r\nexport default Hourly;","import React from 'react'\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nimport { store } from '../Redux';\r\nimport CurrentWeather from \"../CurrentWeather\";\r\nimport Forecast from \"../Forecast\";\r\nimport Hourly from \"../Hourly\";\r\nimport { bindActionCreators } from 'redux';\r\nimport * as actions from '../Actions';\r\n\r\nconst { dispatch } = store;\r\n\r\nconst { setTheme } = bindActionCreators(actions, dispatch);\r\n\r\n\r\nconst WeatherPage = withRouter(({ match }) => {\r\n    let { id } = match.params;\r\n    if (!id) {\r\n        id = 'Moscow';\r\n    }\r\n    const { theme } = store.getState();\r\n    return (\r\n        <div className=\"app\">\r\n            <div className={`app__top-container ${theme}`}>\r\n                <CurrentWeather param={{ city: id }} setTheme={setTheme} />\r\n                <Hourly param={{ city: id }} theme={theme} />\r\n            </div>\r\n            <div className=\"app__bottom-container\">\r\n                <Forecast param={{ city: id }} />\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default WeatherPage;","import Details from './Details';\r\n\r\nexport default Details;","import React, { Component } from 'react';\r\nimport WithData from '../HOC/WithData';\r\nimport WeatherService from '../../Services/OWMService';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './Details.scss';\r\n\r\nclass Details extends Component {\r\n\r\n    degreesToDirection(deg) {\r\n        const dirArr = ['NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW', 'N'];\r\n        let out = 'N';\r\n        dirArr.forEach((el, index) => {\r\n            if (deg >= (360 / 32 + 360 / 16 * index)) {\r\n                out = el;\r\n            }\r\n        });\r\n        return out;\r\n    }\r\n\r\n    formatDate(date) {\r\n        const d = new Date(date * 1000);\r\n        const weekday = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n        return (weekday[d.getDay()] + \", \" + (\"0\" + d.getDate()).slice(-2)\r\n            + \".\" + (\"0\" + (d.getMonth() + 1)).slice(-2) + \".\" + d.getFullYear());\r\n    }\r\n\r\n    formatTime(date) {\r\n        const d = new Date(date * 1000);\r\n        return (d.getHours() + ':' + (\"0\" + d.getMinutes()).slice(-2));\r\n    }\r\n\r\n    capitalizeFirstLetter(string) {\r\n        return string.charAt(0).toUpperCase() + string.slice(1);\r\n    }\r\n\r\n    render() {\r\n        const { date, city, clouds, humidity, pressure, rain1h, sunrise, sunset, temp, feels_like,\r\n            temp_max, temp_min, weatherDesc, weatherIcon, windDeg, windSpeed } = this.props.data;\r\n\r\n        let url = '/';\r\n        if (city) {\r\n            url = '/city/' + city;\r\n        }\r\n\r\n        return (\r\n            <div className=\"details__container\">\r\n                <Link className=\"details__button-back\" to={url}><i className=\"fa fa-arrow-left\" /></Link>\r\n                <div className=\"details__column\">\r\n                    <div className=\"details__city\">\r\n                        <div className=\"details__city-label\">Last updated</div>\r\n                        <div className=\"details__city-value\">{`${this.formatTime(date)} ${this.formatDate(date)}`}</div>\r\n                        <div className=\"details__city-label\">Location</div>\r\n                        <div className=\"details__city-value\">\r\n                            <Link to=\"/cities\" className=\"details__city-link\">\r\n                                <i className=\"fa fa-map-marker\" />{city}\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"details__main-container\">\r\n                        <div className=\"details__temp-group\">\r\n                            <div className=\"details__temp\">{temp}</div>\r\n                            <div className=\"details__temp-details\">\r\n                                <div className=\"details__label-temp \">Feels like</div>\r\n                                <div className=\"details__value temp\">{feels_like}</div>\r\n                                <div className=\"details__label-temp\">Min</div>\r\n                                <div className=\"details__value temp\">{temp_min}</div>\r\n                                <div className=\"details__label-temp\">Max</div>\r\n                                <div className=\"details__value temp\">{temp_max}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"details__weather-group\">\r\n                            <img\r\n                                className=\"details__weather-img\"\r\n                                src={`https://openweathermap.org/img/wn/${weatherIcon}@2x.png`} alt=\"\" />\r\n                            <div className=\"details__weather-label\">{`${this.capitalizeFirstLetter(weatherDesc)}`}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"bottom__columns\">\r\n                        <div className=\"bottom__left\">\r\n                            <div className=\"bottom__col\">\r\n                                <div className=\"details__label\">Cloudness</div>\r\n                                <div className=\"details__value\">{`${clouds} %`}</div>\r\n                                <div className=\"details__label\">Humidity</div>\r\n                                <div className=\"details__value\">{`${humidity} %`}</div>\r\n                                <div className=\"details__label\">Pressure</div>\r\n                                <div className=\"details__value\">{`${pressure} hPa`}</div>\r\n                                {rain1h !== null ? <>\r\n                                    <div className=\"details__label\">Amount of rain for the last hour</div>\r\n                                    <div className=\"details__value\">{`${rain1h} mm`}</div>\r\n                                </> : null\r\n                                }\r\n                                <div className=\"details__label\">Wind Direction</div>\r\n                                <div className=\"details__value\">{`${this.degreesToDirection(windDeg)}`}</div>\r\n                                <div className=\"details__label\">Wind speed</div>\r\n                                <div className=\"details__value\">{`${windSpeed} m/s`}</div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"bottom__right\">\r\n                            <div className=\"bottom__col\">\r\n                                <div className=\"details__label\">Sunrise time</div>\r\n                                <div className=\"details__value\">{this.formatTime(sunrise)}</div>\r\n                                <div className=\"details__label\">Sunset time</div>\r\n                                <div className=\"details__value\">{this.formatTime(sunset)}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst { getDetailWeather } = new WeatherService();\r\n\r\nexport default WithData(Details, getDetailWeather);","\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Details from '../Details';\r\n\r\nconst DetailsPage = withRouter(({ match }) => {\r\n    let { id } = match.params;\r\n    if (!id) {\r\n        id = 'Moscow';\r\n    }\r\n    return (<div className=\"app\">\r\n        <div className={`app__full-container--grad`}>\r\n            <Details param={{ city: id }} />\r\n        </div>\r\n    </div>);\r\n});\r\n\r\nexport default DetailsPage;","import App from './App';\r\n\r\nexport default App;","import React, { Component } from 'react';\n\nimport { BrowserRouter, Route, withRouter } from 'react-router-dom';\nimport { ErrorBoundary } from '../Error';\n\nimport { WeatherPage, CitiesPage, DetailsPage } from '../Pages';\n\nimport './App.scss';\n\nexport default class App extends Component {\n\n  componentDidUpdate = () => {\n    const { theme } = this.props.store.getState();\n    switch (theme) {\n      case 'hot':\n        document.documentElement.className = 'hotTheme';\n        break;\n      case 'warm':\n        document.documentElement.className = 'warmTheme';\n        break;\n      case 'cold':\n        document.documentElement.className = 'coldTheme';\n        break;\n      default:\n        document.documentElement.className = 'warmTheme';\n        break;\n    }\n    console.log(document.documentElement.className);\n  }\n\n\n  render() {\n    return (\n      <ErrorBoundary>\n        <BrowserRouter basename=\"/weather-app\">\n          <Route path=\"/\" exact component={WeatherPage} />\n          <Route path=\"/city/:id\" component={WeatherPage} />\n          <Route path=\"/cities\" component={CitiesPage} />\n          <Route path=\"/details\" exact component={DetailsPage} />\n          <Route path=\"/details/:id\" component={DetailsPage} />\n        </BrowserRouter>\n      </ErrorBoundary>\n    );\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Components/App';\nimport './index.scss';\nimport { Provider } from 'react-redux';\nimport { store } from './Components/Redux'\n\nconst update = () => {\n    ReactDOM.render(\n        <Provider store={store}>\n            <App store={store} />\n        </Provider>\n        , document.getElementById('root'));\n}\n\nupdate();\nstore.subscribe(update);"],"sourceRoot":""}